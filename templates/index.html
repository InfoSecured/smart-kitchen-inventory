{% extends "base.html" %}

{% block title %}Dashboard - Smart Kitchen Inventory{% endblock %}

{% block content %}
<h2>Current Inventory</h2>
<input type="text" id="searchInput" placeholder="Search inventory..." onkeyup="filterInventory()" style="width: 100%; padding: 10px; font-size: 16px;">

<table border="1" id="inventoryTable">
    <thead>
        <tr>
            <th>Item Name</th>
            <th>Quantity</th>
            <th>Unit</th>
            <th>Expiration Date</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for item in inventory %}
        <tr>
            <td>{{ item.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.unit }}</td>
            <td>{{ item.expiration_date }}</td>
            <td>
                <form action="/decrease_quantity/{{ item.id }}" method="POST" style="display:inline;">
                    <button type="submit">-</button>
                </form>
                <form action="/remove_inventory/{{ item.id }}" method="POST" style="display:inline;">
                    <button type="submit">Remove</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    function filterInventory() {
        const input = document.getElementById("searchInput").value.toLowerCase();
        const rows = document.querySelectorAll("#inventoryTable tbody tr");
        rows.forEach(row => {
            const itemName = row.cells[0].innerText.toLowerCase();
            row.style.display = itemName.includes(input) ? "" : "none";
        });
    }
</script>
{% endblock %}
